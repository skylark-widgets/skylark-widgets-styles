/**
 * skylark-widgets-styles - The skylark style widgets library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-styles/
 * @license MIT
 */
define(["skylark-graphics-colors/Color","skylark-domx-colors/colorer","skylark-widgets-base/Widget","./styles"],function(t,e,s,i){"use strict";var l=s.inherit({klassName:"ColorGradientChooser",_construct:function(t){s.prototype._construct.call(this,t,"div"),this.onChange=null,this.values=[],this.buttons=[],this._elm.style.overflow="hidden",this._elm.style.backgroundColor=Editor.theme.panelColor,this._elm.style.borderStyle="none",this._elm.style.boxSizing="border-box",this._elm.style.borderRadius="4px",this._elm.style.zIndex="2000",this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.style.width="100%",this.canvas.style.height="100%",this._elm.appendChild(this.canvas)},updateButtons:function(){var t=this;function s(){var e=this.color.rgb;t.values[this.index].setRGB(e[0]/255,e[1]/255,e[2]/255),t.updateValues(),null!==t.onChange&&t.onChange(t.values[this.index],this.index)}for(;this.buttons.length>this.values.length;)this._elm.removeChild(this.buttons.shift());for(;this.buttons.length<this.values.length;){var i=document.createElement("input");i.type="text",i.style.display="block",i.style.position="absolute",i.style.top="0px",i.style.width="15px",i.style.height="100%",i.style.cursor="pointer",i.style.outline="none",i.style.borderStyle="none",i.style.boxSizing="border-box",i.style.borderRadius="2px",this._elm.appendChild(i);var l=e(i);i.onchange=s,i.color=l,i.index=-1,this.buttons.push(i)}for(var n=0;n<this.buttons.length;n++)this.buttons[n].index=n},updateValues:function(){for(var t=this.canvas.getContext("2d"),e=t.createLinearGradient(0,0,this.canvas.width,0),s=1/(this.values.length-1),i=0,l=(this.size.x-15)/(this.buttons.length-1),n=0,o=0;o<this.values.length;o++)e.addColorStop(i,this.values[o].getStyle()),this.buttons[o].color.set({r:255*this.values[o].r,g:255*this.values[o].g,b:255*this.values[o].b}),this.buttons[o].style.left=n+"px",i+=s,n+=l;t.fillStyle=e,t.fillRect(0,0,this.canvas.width,this.canvas.height)},setOnChange:function(t){this.onChange=t},setValue:function(e){this.values=[];for(var s=0;s<e.length;s++){var i=new t;i.copy(e[s]),this.values.push(i)}this.updateButtons(),this.updateValues()},getValue:function(){return this.values},updateSize:function(){s.prototype.updateSize.call(this),this.canvas.width=this.size.x,this.canvas.height=this.size.y,this.updateValues()}});return i.ColorGradientChooser=l});
//# sourceMappingURL=sourcemaps/ColorGradientChooser.js.map
