/**
 * skylark-widgets-styles - The skylark style widgets library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-styles/
 * @license MIT
 */
!function(factory,globals){var define=globals.define,require=globals.require,isAmd="function"==typeof define&&define.amd,isCmd=!isAmd&&"undefined"!=typeof exports;if(!isAmd&&!define){var map={};define=globals.define=function(t,e,s){"function"==typeof s?(map[t]={factory:s,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var s=e.split("/"),i=t.split("/");s.pop();for(var n=0;n<i.length;n++)"."!=i[n]&&(".."==i[n]?s.pop():s.push(i[n]));return s.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):map[t]={factory:null,resolved:!0,exports:s}},require=globals.require=function(t){if(!map.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=map[t];if(!module.resolved){var e=[];module.deps.forEach(function(t){e.push(require(t))}),module.exports=module.factory.apply(globals,e)||null,module.resolved=!0}return module.exports}}if(!define)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(define,require){define("skylark-widgets-styles/styles",["skylark-langx/skylark"],function(t){return t.attach("widgets.styles",{})}),define("skylark-widgets-styles/colorpane.tpl",[],function(){return["<div class='sp-container'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>","</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}),define("skylark-widgets-styles/color-chooser",["skylark-langx/langx","skylark-domx-query","skylark-domx-eventer","skylark-domx-plugins-popups","skylark-graphics-colors/Color","skylark-domx-plugins-colors/ColorPane","skylark-widgets-base/widget","./styles","./colorpane.tpl"],function(t,e,s,i,n,o,r,l,a){"use strict";var h=r.inherit({klassName:"ColorChooser",_construct:function(t){r.prototype._construct.call(this,t,"input"),this._elm.type="text",this._elm.style.outline="none",this._elm.style.borderStyle="none",this._elm.style.boxSizing="border-box",this._elm.style.textIndent="4px",this._elm.style.borderRadius="4px",this._elm.style.boxShadow="none",this._elm.style.MozAppearance="textfield",this._elm.style.webkitAppearance="caret",this._elm.style.appearance="textfield";var l=this;this.listenTo(this._velm,"change",function(){l._value=n.parse(l._velm.val()),l.emit("change",l._value)}),this.$pane=e(a),e("body").append(this.$pane),this._picker=o.instantiate(this.$pane[0],{pane:{states:{showInput:!1}}}),this.listenTo(this._picker,"change",function(){l._value=n.parse(l._velm.val()),l.emit("change",l._value)});var h=!0;function u(){h&&(h=!1,l.$pane.hide())}u(),this.listenTo(this._velm,"click touchstart",function(t){h?u():function(){if(h)return;h=!0,l.$pane.show(),l.$pane.css("position","absolute"),l.$pane.offset(i.calcOffset(l.$pane[0],l._elm))}(),s.stop(t)}),this.listenTo(this._picker,"picked",(t,e)=>{l._value=e,l._velm.css("background-color",e.toRgbString()),l._velm.val(e.toHexString()),l.emit("change",e)}),this.listenTo(this._picker,"canceled choosed",t=>{u()}),this.onChange=null},setOnChange:function(t){this.on("change",this.onChange=t)},setValue:function(t){this._value=n.parse(t),this._velm.val(this._value.toHexString())},getValueString:function(t){return this._value.toHexString()},getValue:function(){return this._value},getValueHex:function(){return this._value.toNumber()}});return l.ColorChooser=h}),define("skylark-widgets-base/Widget",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects","skylark-langx-events","skylark-langx-numerics/vector2","skylark-domx-browser","skylark-domx-data","skylark-domx-eventer","skylark-domx-noder","skylark-domx-files","skylark-domx-geom","skylark-domx-velm","skylark-domx-query","skylark-domx-fx","skylark-domx-plugins-base","skylark-data-collection/hash-map","./base","./skins/skin-manager"],function(skylark,types,objects,events,Vector2,browser,datax,eventer,noder,files,geom,elmx,$,fx,plugins,HashMap,base,SkinManager){const NativeEvents={drag:2,dragend:2,dragenter:2,dragexit:2,dragleave:2,dragover:2,dragstart:2,drop:2,abort:3,change:3,selectionchange:3,submit:3,reset:3,fullscreenchange:3,fullscreenerror:3,focus:4,blur:4,focusin:4,focusout:4,keydown:5,keypress:5,keyup:5,message:6,click:7,contextmenu:7,dblclick:7,mousedown:7,mouseup:7,mousemove:7,mouseover:7,mouseout:7,mouseenter:7,mouseleave:7,progress:11,textInput:12,tap:13,touchstart:13,touchmove:13,touchend:13,load:14,resize:14,select:14,scroll:14,unload:14,wheel:15},Plugin=plugins.Plugin;var Widget=Plugin.inherit({klassName:"Widget",_construct:function(t,e,s){t&&!(t instanceof Widget||t.element)&&(s=e,e=t,t=null),types.isHtmlNode(e)?s=this._parse(e,s):(s=e,e=null),types.isString(s)&&(s={tagName:s}),this.overrided(e,s),e?this._velm=this.elmx(this._elm):(this._velm=this._create(),this._elm=this._velm.elm()),Object.defineProperty(this,"state",{value:this.options.state||new HashMap}),this.visible=!0,this.size=new Vector2(0,0),this.location=new Vector2(0,0),this._mode=Widget.TOP_LEFT,this._init();var i=this.options.addons;if(i){var n=this.constructor,o=n.addons;for(var r in i)for(var l=0;l<i[r].length;l++){var a=i[r][l];if(types.isString(a)){var h=a,u=o[r][h],d=u.ctor?u.ctor:u;this.addon(d,u.options)}}}t?this.setParent(t):this._velm.isInDocument()&&this._startup()},_parse:function(elm,options){var optionsAttr=datax.data(elm,"options");if(optionsAttr){var options1=eval("({"+optionsAttr+"})");options=objects.mixin(options1,options)}return options||{}},_create:function(){var t=this.options.template;if(t)return this.elmx(t);var e=this.options.tagName;if(e)return this.elmx(noder.createElement(e,{style:{position:"absolute",overflow:"hidden"}}));throw new Error("The template or tagName is not existed in options!")},_init:function(){var t=this;this.widgetClass&&this._velm.addClass(this.widgetClass),this.state.on("changed",function(e,s){t._refresh(s.data)})},_startup:function(){},isNativeEvent:function(t){if(types.isString(t))return!!NativeEvents[t];if(types.isArray(t)){for(var e=0;e<t.length;e++)if(NativeEvents[t[e]])return!0;return!1}},on:function(t,e,s,i,n,o){this.el_&&this.isNativeEvent(t)?eventer.on(this.el_,t,e,s,i,n,o):Plugin.prototype.on.call(this,t,e,s,i,n,o)},off:function(t,e){this.el_&&this.isNativeEvent(t)?eventer.off(this.el_,t,e):Plugin.prototype.off.call(this,t,e)},listenTo:function(t,e,s,i){types.isString(t)||types.isArray(t)?(i=s,s=e,e=t,this.el_&&this.isNativeEvent(e)?eventer.on(this.el_,e,s,this,i):this.on(e,s,this,i)):t.nodeType?eventer.on(t,e,s,this,i):Plugin.prototype.listenTo.call(this,t,e,s,i)},unlistenTo:function(t,e,s){types.isString(t)||types.isArray(t)?(s=e,e=t,this.el_&&this.isNativeEvent(e)?eventer.off(this.el_,e,s):this.off(e,s)):t.nodeType?eventer.off(t,e,s):Plugin.prototype.unlistenTo.call(this,t,e,s)},updateLocation:function(t){void 0!==t&&(this._mode=t),this._mode===Widget.TOP_LEFT||this._mode===Widget.TOP_RIGHT?this._elm.style.top=this.location.y+"px":this._elm.style.bottom=this.location.y+"px",this._mode===Widget.TOP_LEFT||this._mode===Widget.BOTTOM_LEFT?this._elm.style.left=this.location.x+"px":this._elm.style.right=this.location.x+"px"},updateSize:function(){this._elm.style.width=this.size.x+"px",this._elm.style.height=this.size.y+"px"},setVisibility:function(t){this.visible=t,this.updateVisibility()},updateVisibility:function(){this._elm.style.display=this.visible?"block":"none"},_refresh:function(t){},mapping:{events:{},attributs:{},properties:{},styles:{}},addon:function(t,e){var s=t.categoryName,i=t.addonName;this._addons=this.addons||{};var n=this._addons[s]=this._addons[s]||{};return n[i]=new t(this,e),this},addons:function(t,e){this._addons=this.addons||{};var s=this._addons[t]=this._addons[t]||{};if(void 0==e)return objects.clone(s||null);objects.mixin(s,e)},render:function(){return this._elm},getEnclosing:function(t){return null},getEnclosed:function(){return children=new ArrayList,children},getSkin:function(){return SkinManager.get()},show:function(){this._velm.show()},hide:function(){this._velm.hide()},focus:function(){try{this._velm.focus()}catch(t){}return this},blur:function(){return this._velm.blur(),this},enable:function(){return this.state.set("disabled",!1),this},disable:function(){return this.state.set("disabled",!0),this},addClass:function(t){return this._velm.addClass(t),this},hasClass:function(t){return this._velm.hasClass(t)},offset:function(){return this._velm.pagePosition()},outerWidth:function(){return this._velm.marginSize().width},outerHeight:function(){return this._velm.marginSize().height},removeClass:function(t){return this._velm.removeClass(t),this},toggleClass:function(t){return this._velm.toggleClass(t),this},aria:function(t,e){const s=this,i=s.getEl(s.ariaTarget);return void 0===e?s._aria[t]:(s._aria[t]=e,s.state.get("rendered")&&i.setAttribute("role"===t?t:"aria-"+t,e),s)},attr:function(t,e){var s=this._velm,i=s.attr(t,e);return i==s?this:i},getAttr:function(t){return this._velm.attr(t)},setAttr:function(t,e){return this._velm.attr(t,e),this},removeAttr:function(t){return this._velm.removeAttr(t),this},center:function(){this.location.set((this.parent.size.x-this.size.x)/2,(this.parent.size.y-this.size.y)/2)},css:function(t,e){var s=this._velm,i=s.css(t,e);return i==s?this:i},getStyle:function(t){return this._velm.css(t)},setStyle:function(t,e){return this._velm.css(t,e),this},data:function(t,e){var s=this._velm,i=s.data(t,e);return i==s?this:i},getData:function(t){return this._velm.data(t)},setData:function(t,e){return this._velm.data(t,e),this},parent:{get:function(){return this.getParent()},set:function(t){this.setParent(t)}},getParent:function(){return this._parent},setParent:function(t){var e=this._parent;return this._parent=t,t?(this.mount(t._elm||t.element),t._setupChild&&t._setupChild(this)):e&&this.unmount(),this},prop:function(t,e){var s=this._velm,i=s.prop(t,e);return i==s?this:i},getProp:function(t){return this._velm.prop(t)},setProp:function(t,e){return this._velm.prop(t,e),this},throb:function(t){return this.options.throbber&&(t=objects.defaults(t,this.options.throbber)),noder.throb(this._elm,t)},update:function(){this.updateVisibility(),this.visible&&(this.updateSize(),this.updateLocation())},mount:function(t,e){var s=t.element||t,i=this._elm;e&&"child"!=e?"before"==e?noder.before(s,i):"after"==e?noder.after(s,i):"prepend"==e&&noder.prepend(s,i):noder.append(s,i),this._startup()},unmount:function(){this._velm.remove()},preventDragEvents:function(){this.element.ondrop=Widget.preventDefault,this.element.ondragover=Widget.preventDefault},element:{get:function(){return this._elm},set:function(t){this._elm=t}},position:{get:function(){return this.location},set:function(t){this.location=t}},setAltText:function(t){var e=document.createElement("div");e.style.position="absolute",e.style.display="none",e.style.alignItems="center",e.style.zIndex="10000",e.style.border="3px solid",e.style.borderRadius="5px",e.style.color=Editor.theme.textColor,e.style.backgroundColor=Editor.theme.barColor,e.style.borderColor=Editor.theme.barColor,e.style.height="fit-content",document.body.appendChild(e);var s=document.createTextNode(t);e.appendChild(s);var i=this.destroy;return this.destroy=function(){i.call(this),document.body.contains(e)&&document.body.removeChild(e)},this._elm.style.pointerEvents="auto",this._elm.onmousemove=function(t){e.style.display="flex",e.style.left=t.clientX+8+"px",e.style.top=t.clientY-20+"px"},this._elm.onmouseout=function(){e.style.display="none"},e},setOnClick:function(t){this._elm.onclick=t},removeAllChildren:function(){for(;this._elm.firstChild;)this._elm.removeChild(this._elm.firstChild)},setMode:function(t){this._mode=t,this._elm.style.bottom=null,this._elm.style.right=null,this._elm.style.left=null},destroy:function(){this._parent&&(this._parent.element?this._parent.element.contains(this.element)&&(this._parent.element.removeChild(this.element),this._parent=null):(console.warn("nunuStudio: Parent is not a Element.",this),this._parent.contains(this.element)&&(this._parent.removeChild(this.element),this._parent=null)))}});return Widget.prototype.updateInterface=Widget.prototype.update,Widget.prototype.updatePosition=Widget.prototype.updateLocation,Widget.prototype.attachTo=Widget.prototype.setParent,Widget.prototype._attachTo=Widget.prototype.mount,Widget.prototype.detach=Widget.prototype.unmount,Widget.TOP_LEFT=0,Widget.TOP_RIGHT=1,Widget.BOTTOM_LEFT=2,Widget.BOTTOM_RIGHT=3,Widget.inherit=function(t){var e=plugins.Plugin.inherit.apply(this,arguments);function s(t){e.prototype[t]=function(e){return void 0!==e?(this.state.set(t,e),this):this.state.get(t)}}if(t.state)for(var i in t.state)s(i);return t.pluginName&&plugins.register(e,t.pluginName),e},Widget.register=function(t,e){var s=t.prototype,i=e||s.pluginName;function n(e){t.prototype[e]=function(t){return void 0!==t?(this.state.set(e,t),this):this.state.get(e)}}if(s.state)for(var o in s.state)n(o);return i&&plugins.register(t,i),t},Widget.preventDefault=function(t){t.preventDefault()},base.Widget=Widget}),define("skylark-widgets-styles/color-gradient-chooser",["skylark-graphics-colors/Color","skylark-domx-plugins-colors/colorer","skylark-widgets-base/Widget","./styles"],function(t,e,s,i){"use strict";var n=s.inherit({klassName:"ColorGradientChooser",_construct:function(t){s.prototype._construct.call(this,t,"div"),this.onChange=null,this.values=[],this.buttons=[],this._elm.style.overflow="hidden",this._elm.style.backgroundColor=Editor.theme.panelColor,this._elm.style.borderStyle="none",this._elm.style.boxSizing="border-box",this._elm.style.borderRadius="4px",this._elm.style.zIndex="2000",this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.style.width="100%",this.canvas.style.height="100%",this._elm.appendChild(this.canvas)},updateButtons:function(){var t=this;function s(){var e=this.color.rgb;t.values[this.index].setRGB(e[0]/255,e[1]/255,e[2]/255),t.updateValues(),null!==t.onChange&&t.onChange(t.values[this.index],this.index)}for(;this.buttons.length>this.values.length;)this._elm.removeChild(this.buttons.shift());for(;this.buttons.length<this.values.length;){var i=document.createElement("input");i.type="text",i.style.display="block",i.style.position="absolute",i.style.top="0px",i.style.width="15px",i.style.height="100%",i.style.cursor="pointer",i.style.outline="none",i.style.borderStyle="none",i.style.boxSizing="border-box",i.style.borderRadius="2px",this._elm.appendChild(i);var n=e(i);i.onchange=s,i.color=n,i.index=-1,this.buttons.push(i)}for(var o=0;o<this.buttons.length;o++)this.buttons[o].index=o},updateValues:function(){for(var t=this.canvas.getContext("2d"),e=t.createLinearGradient(0,0,this.canvas.width,0),s=1/(this.values.length-1),i=0,n=(this.size.x-15)/(this.buttons.length-1),o=0,r=0;r<this.values.length;r++)e.addColorStop(i,this.values[r].getStyle()),this.buttons[r].color.set({r:255*this.values[r].r,g:255*this.values[r].g,b:255*this.values[r].b}),this.buttons[r].style.left=o+"px",i+=s,o+=n;t.fillStyle=e,t.fillRect(0,0,this.canvas.width,this.canvas.height)},setOnChange:function(t){this.onChange=t},setValue:function(e){this.values=[];for(var s=0;s<e.length;s++){var i=new t;i.copy(e[s]),this.values.push(i)}this.updateButtons(),this.updateValues()},getValue:function(){return this.values},updateSize:function(){s.prototype.updateSize.call(this),this.canvas.width=this.size.x,this.canvas.height=this.size.y,this.updateValues()}});return i.ColorGradientChooser=n}),define("skylark-widgets-styles/main",["./styles","./color-chooser","./color-gradient-chooser"],function(t){return t}),define("skylark-widgets-styles",["skylark-widgets-styles/main"],function(t){return t})}(define,require),!isAmd){var skylarkjs=require("skylark-langx-ns");isCmd?module.exports=skylarkjs:globals.skylarkjs=skylarkjs}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-widgets-styles.js.map
